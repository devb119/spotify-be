const mongoose = require("mongoose");

const playlistSchema = new mongoose.Schema({
  name: {
    type: String,
    required: true,
  },
  description: {
    type: String,
  },
  imageURL: {
    type: String,
    default:
      "data:image/png;base64,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",
  },
  songs: [{ type: mongoose.Schema.ObjectId, ref: "song" }],
  creator: {
    type: mongoose.Schema.ObjectId,
    ref: "user",
  },
  section: {
    type: mongoose.Schema.ObjectId,
    ref: "section",
  },
  // True when the playlist is created by server itself
  isAutoGenerated: {
    type: Boolean,
    default: false,
  },
});

playlistSchema.pre(/^find/, function (next) {
  this.populate({ path: "songs creator section" });
  next();
});

const Playlist = mongoose.model("playlist", playlistSchema);

module.exports = Playlist;
